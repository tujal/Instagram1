<%= render "home/nav" %>
<div class="container mt-5 ">
<div class="rows d-flex bg-white">
    <div class="col-4 p-2">
        <h5><%= image_tag(@post.user.profile_image, size:"20x20",class:"rounded-circle") if @post.user.profile_image.attached?  %><%= @post.user.email %></h5>
         <%= image_tag(@post.image ,size:"400x400" , class:"rounded" ) if @post.image.attached? %>
         <small class="text-secondary lh-1">  <%= time_ago_in_words(@post.created_at) %>Ago</small><br>
         <div>
         <% pre_like = @post.likes.find { |like| like.user_id == current_user.id} %>
         <% if pre_like %>
           <%= button_to post_like_path(@post, pre_like), method: :delete, class:"bg-white btn btn-link"  do %>
            <img src="https://cdn-icons-png.flaticon.com/128/833/833472.png", style="width:30px; height:30px">
            <% end %>
         <% else %>
           <%= button_to post_likes_path(@post), method: :post, class:"bg-white btn btn-link" do %>
            <img src="https://cdn-icons-png.flaticon.com/128/1077/1077035.png", style="width:30px; height:30px">
            <% end %>
         <% end %>
            <p><%= @post.likes.count %> <%= (@post.likes.count) == 1 ? 'Like' : 'Likes'%></p>
         </div>
    </div>
    <div class="col-8">
         <h3> 
         <div class="d-flex">
         <%= @post.title %>  &nbsp;
            <% if @post.user_id == current_user.id%>
            <%= link_to "Edit post",  edit_user_post_path(current_user, @post) , class:"btn btn-outline-primary btn-sm mt-2" %> &nbsp;
            <%= button_to "Delete post",  user_post_path(@post) ,method: :delete ,class:"btn btn-outline-danger btn-sm mt-2" %>
            <% end %>
            </div>
         </h3>
      
      
        <% if @post.comments.present? %>
            <%= render "/comments/comment" %>
        <% end %>
        <div class="w-50">
        <%= form_with model: [current_user ,@post ,Comment.new] do | form | %>
            <%= form.text_field :comment, class:"form-control", placeholder:"Add Your Comment...."%>
            <%= form. submit "Add Comment" ,class:"btn btn-outline-success btn-sm btn-rounded mt-2"%>
        <% end %>
        </div>
    </div>
</div>
</div>